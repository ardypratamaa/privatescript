var Map = `{"name":"RSI Cops n Robbers","width":960,"height":630,"spawnDistance":220,"bg":{"type":"hockey","width":0,"height":0,"kickOffRadius":0,"cornerRadius":0},"vertexes":[{"bCoef":0,"cMask":["red","blue"],"x":655,"y":395,"cGroup":["ball"]},{"bCoef":0,"cMask":["red","blue"],"x":655,"y":515,"cGroup":["ball"]},{"bCoef":0,"cMask":["red","blue"],"x":655,"y":-515,"cGroup":["ball"]},{"bCoef":0,"cMask":["red","blue"],"x":655,"y":260,"cGroup":["ball"]},{"x":-150,"y":-430,"cMask":["none"],"curve":90},{"x":653,"y":-430,"cMask":["none"]},{"x":653,"y":-280,"cMask":["none"]},{"x":-150,"y":-280,"cMask":["none"],"curve":90},{"x":-180,"y":-250,"cMask":["none"],"curve":90},{"x":-180,"y":513,"cMask":["none"]},{"x":-330,"y":513,"cMask":["none"]},{"x":-330,"y":-250,"cMask":["none"],"curve":90},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-247,"y":451},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-187,"y":451},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-187,"y":-330},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-247,"y":-330},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-263,"y":451},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-323,"y":451},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-323,"y":-330},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-263,"y":-330},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-323,"y":-345},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-187,"y":-345},{"bCoef":0,"cMask":["wall"],"x":-255,"y":444},{"bCoef":0,"cMask":["wall"],"x":-255,"y":360},{"bCoef":0,"cMask":["wall"],"x":-255,"y":180},{"bCoef":0,"cMask":["wall"],"x":-255,"y":260},{"bCoef":0,"cMask":["wall"],"x":-255,"y":80},{"bCoef":0,"cMask":["wall"],"x":-255,"y":0},{"bCoef":0,"cMask":["wall"],"x":-255,"y":-180},{"bCoef":0,"cMask":["wall"],"x":-255,"y":-100},{"bCoef":0,"cMask":["wall"],"x":-90,"y":-355},{"bCoef":0,"cMask":["wall"],"x":-5,"y":-355},{"bCoef":0,"cMask":["wall"],"x":185,"y":-355},{"bCoef":0,"cMask":["wall"],"x":100,"y":-355},{"bCoef":0,"cMask":["wall"],"x":290,"y":-355},{"bCoef":0,"cMask":["wall"],"x":375,"y":-355},{"bCoef":0,"cMask":["wall"],"x":565,"y":-355},{"bCoef":0,"cMask":["wall"],"x":480,"y":-355},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-217,"y":-423,"curve":90},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":559,"y":-422},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":559,"y":-362},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-217,"y":-363,"curve":-90},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-217,"y":-287,"curve":90},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":559,"y":-286},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":559,"y":-346},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-217,"y":-347,"curve":-90},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-150,"y":-250,"color":"3a005c","curve":20},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-150,"y":-110,"color":"3a005c"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":150,"y":-110,"color":"3a005c","curve":30},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":150,"y":-250,"color":"3a005c"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-150,"y":250,"color":"3a005c","curve":20},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-150,"y":80,"color":"3a005c","curve":20},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":150,"y":250,"color":"3a005c","curve":15},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-150,"y":410,"color":"3a005c","curve":15},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-150,"y":513,"color":"3a005c"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":150,"y":410,"color":"3a005c","curve":15},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":150,"y":513,"color":"3a005c"},{"bCoef":0,"cMask":["red","blue"],"x":-100,"y":-250,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":-65,"y":-250},{"bCoef":0,"cMask":["red","blue"],"x":150,"y":-175},{"bCoef":0,"cMask":["red","blue"],"x":150,"y":-140,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":30,"y":-110},{"bCoef":0,"cMask":["red","blue"],"x":65,"y":-110},{"bCoef":0,"cMask":["red","blue"],"x":-150,"y":150,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":-150,"y":185,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":-85,"y":80,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":-50,"y":80,"curve":10},{"bCoef":0,"cMask":["red","blue"],"x":45,"y":250},{"bCoef":0,"cMask":["red","blue"],"x":80,"y":250,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":-420,"y":-180,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":-350,"y":-180,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":-350,"y":-360},{"bCoef":0,"cMask":["red","blue"],"x":-350,"y":-440,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":-350,"y":-513,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":-500,"y":-180},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-242,"y":-423},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":-242,"y":-287},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-468,"y":381,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-468,"y":406,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-443,"y":406,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-443,"y":381,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-616,"y":381,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-616,"y":406,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-641,"y":406,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-641,"y":381,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-468,"y":203,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-468,"y":228,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-443,"y":228,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-443,"y":203,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-616,"y":203,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-616,"y":228,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-641,"y":228,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-641,"y":203,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-530,"y":0,"color":"222222"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-530,"y":-80,"color":"222222"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-440,"y":-80,"color":"222222"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-460,"y":90,"color":"222222"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-360,"y":90,"color":"222222"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-360,"y":0,"color":"222222"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-755,"y":515},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-755,"y":-515},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":270,"y":-245,"curve":30},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":270,"y":-140,"curve":30},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":470,"y":-245,"curve":30},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":350,"y":15,"curve":20},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":350,"y":-140,"curve":20},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-80,"y":410,"curve":15},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-45,"y":410,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":350,"y":-80,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":350,"y":-45,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":270,"y":-210,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":270,"y":-175,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":-210,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":-175,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":-80,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":-45,"curve":20},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":558,"y":59,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":558,"y":79,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":578,"y":79,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":578,"y":59,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":558,"y":-195,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":558,"y":-175,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":578,"y":-175,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":578,"y":-195,"color":"222333"},{"bCoef":0,"cMask":["red","blue"],"x":270,"y":15,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":270,"y":120,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":120,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":270,"y":50,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":270,"y":85,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":50,"curve":20},{"bCoef":0,"cMask":["red","blue"],"x":470,"y":85,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":-600,"y":-180,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":-753,"y":-180},{"bCoef":0,"cMask":["red","blue"],"x":-600,"y":90,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":-753,"y":90},{"bCoef":0,"cMask":["red","blue"],"x":-600,"y":20},{"bCoef":0,"cMask":["red","blue"],"x":-600,"y":55,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":-600,"y":-135,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":-600,"y":-100},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":70,"y":-514,"curve":100},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":40,"y":-480,"curve":100},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":100,"y":-480,"curve":100},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":370,"y":-514,"curve":100},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":340,"y":-480,"curve":100},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":400,"y":-480,"curve":100},{"bCoef":0,"cMask":["blue"],"x":657.5,"y":394.9,"cGroup":["ball"]},{"bCoef":0,"cMask":["blue"],"x":657.5,"y":517.5,"cGroup":["ball"]},{"bCoef":-0.003,"cMask":["blue"],"x":657.5,"y":-517.5,"cGroup":["ball"],"vis":true,"color":"666666"},{"bCoef":0,"cMask":["blue"],"x":657.5,"y":260.1,"cGroup":["ball"]},{"bCoef":0,"cMask":["blue"],"cGroup":["ball"],"x":-757.5,"y":517.5},{"bCoef":0,"cMask":["blue"],"cGroup":["ball"],"x":-757.5,"y":-517.5,"color":"666666"},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":576,"y":-422},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"x":576,"y":-286},{"bCoef":0,"cMask":["red"],"x":569,"y":469,"color":"5777af"},{"bCoef":0,"cMask":["red"],"x":569,"y":505,"color":"5777af"},{"bCoef":0,"cMask":["red"],"x":645,"y":505,"color":"5777af"},{"bCoef":0,"cMask":["red"],"x":645,"y":469,"color":"5777af"},{"bCoef":0,"cMask":["blue"],"cGroup":["ball"],"x":655,"y":260.1,"curve":-203,"color":"3d3d3d"},{"bCoef":0,"cMask":["blue"],"cGroup":["ball"],"x":655,"y":394.9,"curve":-203,"color":"3d3d3d"},{"bCoef":0,"cMask":["red"],"x":745,"y":261.5,"curve":-5,"color":"0a0a0a"},{"bCoef":0,"cMask":["red"],"x":745,"y":393.5,"curve":-5,"color":"0a0a0a"},{"bCoef":0,"cMask":["red"],"x":763,"y":360.5,"curve":7,"vis":false,"color":"0a0a0a"},{"bCoef":0,"cMask":["red"],"x":655,"y":359.1,"curve":7,"vis":false,"color":"494949"},{"bCoef":0,"cMask":["red"],"x":781,"y":327.5,"curve":7,"color":"0a0a0a"},{"bCoef":0,"cMask":["red"],"x":655,"y":326.1,"curve":7,"color":"494949"},{"bCoef":0,"cMask":["red"],"x":763,"y":294.5,"curve":7,"vis":true,"color":"0a0a0a"},{"bCoef":0,"cMask":["red"],"x":655,"y":293.1,"curve":7,"vis":true,"color":"494949"},{"bCoef":-0.0032,"cMask":["red","blue"],"cGroup":["ball"],"x":-757.5,"y":-630,"vis":true,"color":"666666"},{"bCoef":-0.0011,"cMask":["red","blue"],"cGroup":["ball"],"x":960,"y":-517.5,"vis":true,"color":"666666"},{"bCoef":-0.0032,"cMask":["red","blue"],"cGroup":["ball"],"x":-757.5,"y":629,"vis":true,"color":"666666"},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":-20,"vis":false,"curve":-210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":20,"vis":false,"curve":210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":-60,"curve":-210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":-100,"curve":-210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":-140,"curve":-210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":60,"curve":210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":100,"curve":210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":140,"curve":210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":180,"curve":210},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"x":-228,"y":-180,"curve":-210},{"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"x":228,"y":-20,"vis":false,"curve":210},{"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"x":228,"y":20,"vis":false,"curve":-210},{"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"x":228,"y":-60,"curve":210},{"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"x":228,"y":60},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-12,"y":-41,"vis":true,"color":"0a0a0a"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":12,"y":-41,"vis":true,"color":"0a0a0a"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":12,"y":12,"color":"0a0a0a"},{"bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"x":-12,"y":12,"color":"0a0a0a"},{"bCoef":0,"cMask":["red","blue"],"x":45,"y":410,"curve":15},{"bCoef":0,"cMask":["red","blue"],"x":80,"y":410,"curve":15},{"bCoef":0,"x":311,"y":178,"cMask":["wall"],"color":"cccccc"},{"bCoef":0,"x":960,"y":178,"color":"cccccc"},{"bCoef":0,"x":311,"y":630,"color":"cccccc"},{"bCoef":0,"x":860,"y":261.5,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":928,"y":260.1,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":860,"y":393.5,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":928,"y":392.1,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":876,"y":294.5,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":928,"y":293.1,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":892,"y":327.5,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":928,"y":326.1,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":876,"y":360.5,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"x":928,"y":359.1,"color":"0a0a0a","vis":true,"curve":10},{"bCoef":0,"cMask":["wall"],"x":-250,"y":-280,"curve":55},{"bCoef":0,"cMask":["wall"],"x":-203,"y":-340,"curve":55},{"bCoef":0,"x":655,"y":262.9},{"bCoef":0,"cMask":["red"],"x":655,"y":295.9,"color":"494949"},{"bCoef":0,"cMask":["red"],"x":655,"y":328.9,"color":"494949"},{"bCoef":0,"cMask":["red"],"x":655,"y":361.9,"color":"494949"},{"bCoef":0,"cGroup":["ball"],"x":655,"y":392.1},{"bCoef":0,"cMask":["red"],"x":627,"y":294.5,"color":"494949"},{"bCoef":0,"cMask":["red"],"x":609,"y":327.5,"color":"494949"},{"bCoef":0,"cMask":["red"],"x":627,"y":360.5,"color":"494949"},{"bCoef":0,"x":928,"y":262.9},{"bCoef":0,"x":928,"y":295.9},{"bCoef":0,"x":928,"y":328.9},{"bCoef":0,"x":928,"y":361.9},{"bCoef":0,"x":928,"y":394.9},{"bCoef":0,"cMask":["red","blue"],"x":89,"y":79,"curve":30},{"bCoef":0,"cMask":["red","blue"],"x":89,"y":102,"curve":30},{"bCoef":0,"x":89,"y":137,"cMask":["red","blue"]},{"bCoef":0,"cMask":["red","blue"],"x":89,"y":195},{"bCoef":0,"x":150,"y":195,"cMask":["red","blue"]},{"bCoef":0,"cMask":["wall"],"cGroup":["wall"],"x":-6,"y":-35,"vis":false},{"bCoef":0,"cMask":["wall"],"cGroup":["wall"],"x":6,"y":-35,"vis":false},{"cGroup":["ball"],"x":-960,"y":-517.5}],"segments":[{"color":"494949","cMask":[""],"v0":205,"v1":209},{"vis":true,"color":"666666","bCoef":-0.0032,"cMask":["red","blue"],"cGroup":["ball"],"v0":167,"v1":150},{"vis":true,"color":"666666","bCoef":-0.0032,"cMask":["red","blue"],"cGroup":["ball"],"v0":169,"v1":149},{"vis":true,"color":"666666","bCoef":-0.0011,"cMask":["red","blue"],"cGroup":["ball"],"v0":168,"v1":147},{"vis":true,"color":"666666","bCoef":-0.0015,"cMask":["red","blue"],"cGroup":["ball"],"v0":150,"v1":225},{"color":"3d3d3d","bCoef":0,"cMask":["blue"],"cGroup":["ball"],"v0":157,"v1":158,"curve":-203},{"color":"000000","bCoef":0,"cMask":["red","blue"],"v0":0,"v1":1,"x":655,"cGroup":["ball"]},{"color":"000000","bCoef":0,"cMask":["red","blue"],"v0":2,"v1":3,"x":655,"cGroup":["ball"]},{"color":"333333","v0":4,"v1":5,"cMask":["none"],"y":-430},{"color":"333333","v0":6,"v1":7,"cMask":["none"],"y":-280},{"color":"333333","v0":8,"v1":9,"cMask":["none"],"x":-180},{"color":"333333","v0":10,"v1":11,"cMask":["none"]},{"color":"333333","v0":11,"v1":4,"cMask":["none"],"curve":90},{"color":"333333","v0":8,"v1":7,"cMask":["none"],"curve":90},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":12,"v1":13,"y":470},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":13,"v1":14,"x":-190},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":14,"v1":15,"y":-120},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":15,"v1":12,"x":-250},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":16,"v1":17,"y":470},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":17,"v1":18,"x":-320},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":18,"v1":19,"y":-120},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":19,"v1":16,"x":-260},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":20,"v1":21,"y":-135},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":22,"v1":23,"x":-255},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":24,"v1":25,"x":-255},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":26,"v1":27,"x":-255},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":28,"v1":29,"x":-255},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":30,"v1":31,"y":-355},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":32,"v1":33,"y":-355},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":34,"v1":35,"y":-355},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":36,"v1":37,"y":-355},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":38,"v1":39,"y":-420},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":39,"v1":40,"x":430},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":40,"v1":41,"y":-360},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":42,"v1":43,"y":-290},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":43,"v1":44,"x":430},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":44,"v1":45,"y":-350},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":46,"v1":47,"x":-150},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":53,"v1":54,"x":-150},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":55,"v1":56,"x":150},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":57,"v1":58,"y":-250},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":59,"v1":60,"x":150},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":61,"v1":62,"y":-80},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":47,"v1":61},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":46,"v1":57},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":62,"v1":48},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":48,"v1":60},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":59,"v1":49},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":49,"v1":58},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":63,"v1":64,"x":-150},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":65,"v1":66,"y":80},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":67,"v1":68,"y":250},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":52,"v1":68},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":50,"v1":67},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":50,"v1":64},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":51,"v1":63},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":51,"v1":65},{"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"v0":69,"v1":70,"y":-180},{"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"v0":70,"v1":71,"x":-350},{"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"v0":72,"v1":73,"x":-350},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":75,"v1":76,"x":-165},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":77,"v1":78,"x":490},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":78,"v1":79,"y":430},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":79,"v1":80,"x":510},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":80,"v1":77,"y":410},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":81,"v1":82,"x":390},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":82,"v1":83,"y":430},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":83,"v1":84,"x":370},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":84,"v1":81,"y":410},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":85,"v1":86,"x":490},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":86,"v1":87,"y":210},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":87,"v1":88,"x":510},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":88,"v1":85,"y":190},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":89,"v1":90,"x":390},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":90,"v1":91,"y":210},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":91,"v1":92,"x":370},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":92,"v1":89,"y":190},{"color":"222222","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":93,"v1":94,"x":-530},{"color":"222222","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":94,"v1":95,"y":-80},{"color":"222222","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":96,"v1":97,"y":90},{"color":"222222","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":97,"v1":98,"x":-360},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":1,"v1":99,"y":515},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":99,"v1":100,"x":-755},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":100,"v1":2,"y":-515},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":101,"v1":103,"y":-245},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":105,"v1":102,"y":-140},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":53,"v1":106,"y":410},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":188,"v1":107,"y":410},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":106,"v1":107,"y":410},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":108,"v1":109,"x":350},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":110,"v1":111,"x":270},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":112,"v1":113,"x":470},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":114,"v1":115,"x":470},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":116,"v1":117,"x":558},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":117,"v1":118,"y":45},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":118,"v1":119,"x":630},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":119,"v1":116,"y":25},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":120,"v1":121,"x":558},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":121,"v1":122,"y":-175},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":122,"v1":123,"x":630},{"color":"222333","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":123,"v1":120,"y":-195},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":102,"v1":111,"x":270},{"color":"3a005c","bCoef":0,"v0":110,"v1":101,"cMask":["red","blue"],"x":270},{"color":"3a005c","bCoef":0,"v0":105,"v1":108,"cMask":["red","blue"],"x":350},{"color":"3a005c","bCoef":0,"v0":109,"v1":104,"cMask":["red","blue"],"x":350},{"color":"3a005c","bCoef":0,"v0":112,"v1":103,"cMask":["red","blue"],"x":470},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":104,"v1":124,"y":15},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":125,"v1":126,"y":120},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":127,"v1":128,"x":270},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":129,"v1":130,"x":470},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":125,"v1":128},{"color":"3a005c","bCoef":0,"v0":127,"v1":124,"cMask":["red","blue"]},{"color":"3a005c","bCoef":0,"v0":126,"v1":130,"cMask":["red","blue"]},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":129,"v1":115},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":131,"v1":132,"y":-190},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":133,"v1":134,"y":90},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":135,"v1":136,"x":-600},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":137,"v1":138,"x":-600},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":133,"v1":136,"x":-600},{"color":"3a005c","bCoef":0,"v0":135,"v1":138,"cMask":["red","blue"],"x":-600},{"color":"3a005c","bCoef":0,"v0":137,"v1":131,"cMask":["red","blue"],"x":-600},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":139,"v1":140,"curve":100},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":140,"v1":141,"y":-480},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":141,"v1":139,"curve":100},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":142,"v1":143,"curve":100},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":143,"v1":144,"y":-480},{"color":"000000","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":144,"v1":142,"curve":100},{"color":"000000","bCoef":0,"cMask":["blue"],"v0":145,"v1":146,"x":657.5,"cGroup":["ball"]},{"color":"000000","bCoef":0,"cMask":["blue"],"v0":147,"v1":148,"x":657.5,"cGroup":["ball"]},{"color":"000000","bCoef":0,"cMask":["blue"],"cGroup":["ball"],"v0":146,"v1":149,"y":517.5},{"color":"000000","bCoef":0,"cMask":["blue"],"cGroup":["ball"],"v0":149,"v1":150,"x":-757.5},{"color":"000000","bCoef":0,"cMask":["blue"],"cGroup":["ball"],"v0":150,"v1":147,"y":-517.5},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":151,"v1":152,"x":440},{"color":"5777af","bCoef":0,"cMask":["red"],"v0":153,"v1":154,"x":575},{"color":"5777af","bCoef":0,"cMask":["red"],"v0":154,"v1":155,"y":505},{"color":"5777af","bCoef":0,"cMask":["red"],"v0":155,"v1":156,"x":645},{"color":"5777af","bCoef":0,"cMask":["red"],"v0":156,"v1":153,"y":445},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":170,"v1":171,"vis":false,"curve":210},{"curve":-210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":170,"v1":172},{"curve":-210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":172,"v1":173},{"curve":-210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":173,"v1":174},{"curve":210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":171,"v1":175},{"curve":210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":175,"v1":176},{"curve":210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":176,"v1":177},{"curve":210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":177,"v1":178},{"curve":-210,"vis":false,"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"v0":174,"v1":179},{"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"v0":180,"v1":181,"vis":false,"curve":-210},{"curve":210,"vis":false,"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"v0":180,"v1":182},{"curve":-210,"vis":false,"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"v0":181,"v1":183},{"color":"0a0a0a","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":184,"v1":185,"vis":true},{"color":"0a0a0a","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":185,"v1":186},{"color":"0a0a0a","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":186,"v1":187},{"color":"0a0a0a","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":187,"v1":184},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":189,"v1":55},{"color":"ffffff","cMask":["wall"],"bCoef":0,"v0":188,"v1":189},{"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"v0":131,"v1":74},{"color":"cccccc","bCoef":0,"v0":190,"v1":191,"cMask":["wall"]},{"color":"cccccc","bCoef":0,"v0":190,"v1":192,"cMask":["wall"]},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":157,"v1":159,"cMask":["red"]},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":166,"v1":165,"vis":true,"cMask":["red"]},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":164,"v1":163,"cMask":["red"]},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":162,"v1":161,"cMask":["red"]},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":158,"v1":160,"cMask":["red"]},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":193,"v1":194},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":195,"v1":196},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":197,"v1":198},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":199,"v1":200},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":201,"v1":202},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":56,"v1":55},{"curve":15,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"cGroup":["ball"],"v0":55,"v1":189},{"curve":15,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":188,"v1":107},{"curve":15,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":106,"v1":53},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":53,"v1":54},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":65,"v1":51},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":51,"v1":63},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":64,"v1":50},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":50,"v1":67},{"curve":15,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":68,"v1":52},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":125,"v1":126},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":126,"v1":130},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":129,"v1":115},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":112,"v1":103},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":103,"v1":101},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":101,"v1":110},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":111,"v1":102},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":102,"v1":105},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":105,"v1":108},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":109,"v1":104},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":104,"v1":124},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":124,"v1":127},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":128,"v1":125},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":48,"v1":60},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":59,"v1":49},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":49,"v1":58},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":57,"v1":46},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":46,"v1":47},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":47,"v1":61},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":62,"v1":48},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":96,"v1":97},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":97,"v1":98},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":95,"v1":94},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":94,"v1":93},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":134,"v1":133},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":133,"v1":136},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":135,"v1":138},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":137,"v1":131},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":131,"v1":132},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":131,"v1":74},{"curve":15,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":69,"v1":70},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":70,"v1":71},{"curve":15,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":72,"v1":73},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":114,"v1":113},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":114,"v1":113},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":203,"v1":204,"curve":55},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":41,"v1":38},{"vis":false,"bCoef":0,"cMask":["wall"],"cGroup":["all"],"v0":45,"v1":42},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":205,"v1":159},{"curve":0,"vis":true,"color":"0a0a0a","bCoef":0,"cMask":["red"],"v0":206,"v1":165},{"curve":0,"color":"0a0a0a","bCoef":0,"cMask":["red"],"v0":207,"v1":163},{"curve":0,"color":"0a0a0a","bCoef":0,"cMask":["red"],"v0":208,"v1":161},{"curve":0,"color":"0a0a0a","bCoef":0,"cGroup":["ball"],"v0":209,"v1":160},{"curve":0,"color":"494949","bCoef":0,"cMask":["red"],"v0":166,"v1":210},{"curve":0,"color":"494949","bCoef":0,"cMask":["red"],"v0":210,"v1":206},{"curve":0,"color":"494949","bCoef":0,"cMask":["red"],"v0":164,"v1":211},{"curve":0,"color":"494949","bCoef":0,"cMask":["red"],"v0":211,"v1":207},{"curve":0,"color":"494949","bCoef":0,"cMask":["red"],"v0":162,"v1":212},{"curve":0,"color":"494949","bCoef":0,"cMask":["red"],"v0":212,"v1":208},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":193,"v1":213},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":197,"v1":214},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":199,"v1":215},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":201,"v1":216},{"curve":0,"color":"0a0a0a","bCoef":0,"v0":195,"v1":217},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":66,"v1":218},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":218,"v1":219,"x":99},{"color":"ffffff","bCoef":0,"cMask":["wall"],"v0":219,"v1":220,"x":99},{"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":220,"v1":221,"x":99},{"color":"3a005c","bCoef":0,"v0":221,"v1":222,"cMask":["red","blue"]},{"color":"3a005c","bCoef":0,"v0":222,"v1":52,"cMask":["red","blue"]},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"cMask":["red","blue"],"v0":52,"v1":222},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"v0":222,"v1":221,"cMask":["red","blue"]},{"curve":20,"vis":false,"color":"3a005c","bCoef":0,"v0":221,"v1":220,"cMask":["red","blue"]},{"curve":30,"vis":false,"color":"3a005c","bCoef":0,"v0":219,"v1":218,"cMask":["red","blue"]},{"curve":10,"vis":false,"color":"3a005c","bCoef":0,"v0":218,"v1":66,"cMask":["red","blue"]},{"color":"222222","bCoef":0,"cMask":["wall"],"cGroup":["wall"],"v0":223,"v1":224,"vis":false,"y":-35}],"goals":[],"discs":[{"radius":49.99,"invMass":-0.1,"color":"0a0a0a","bCoef":0.0003,"cMask":["red","wall"],"damping":1.06,"pos":[641,327.5],"cGroup":["ball"]},{"radius":30,"invMass":-0.1,"pos":[-217,421],"color":"774400","bCoef":0,"cMask":["red","blue","ball"],"cGroup":["wall"],"damping":1.03},{"radius":30,"invMass":-0.1,"pos":[-293,421],"color":"222244","bCoef":0,"cMask":["red","blue","ball"],"cGroup":["wall"],"damping":1.03},{"radius":30,"invMass":-0.1,"pos":[529,-316],"color":"225555","bCoef":0,"cMask":["red","blue","ball"],"cGroup":["wall"],"damping":1.03},{"radius":30,"invMass":-0.1,"pos":[-187,-393],"color":"772200","bCoef":0,"cMask":["red","blue","ball"],"cGroup":["wall"],"damping":1.03},{"radius":5,"invMass":0,"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"damping":0,"pos":[-350,-360]},{"radius":5,"invMass":0,"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"damping":0,"pos":[-350,-440]},{"radius":5,"invMass":0,"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"damping":0,"pos":[-350,-270]},{"radius":5,"invMass":0,"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"damping":0,"pos":[-350,-180]},{"radius":5,"invMass":0,"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"damping":0,"pos":[-420,-180]},{"radius":5,"invMass":0,"color":"f6ffa4","bCoef":0,"cMask":["red","blue"],"damping":0,"pos":[-500,-180]},{"radius":32,"invMass":0,"pos":[-432,-250],"color":"0e6500","bCoef":0,"cMask":["wall"],"damping":0},{"radius":23,"invMass":0,"pos":[-556,-250],"color":"0e8200","bCoef":0,"cMask":["wall"],"damping":0},{"radius":23,"invMass":0,"pos":[-432,-350],"color":"0e8000","bCoef":0,"cMask":["wall"],"damping":0},{"radius":47,"invMass":0,"pos":[-556,-350],"color":"0e4c00","bCoef":0,"cMask":["wall"],"damping":0},{"radius":32,"invMass":0,"pos":[-432,-450],"color":"0e6500","bCoef":0,"cMask":["wall"],"damping":0},{"radius":23,"invMass":0,"pos":[-556,-450],"color":"0e8000","bCoef":0,"cMask":["wall"],"damping":0},{"radius":40,"invMass":0,"pos":[-445,5],"color":"5777af","bCoef":0,"cMask":["red"],"damping":0},{"radius":32,"invMass":0,"pos":[-680,-250],"color":"0e6500","bCoef":0,"cMask":["wall"],"damping":0},{"radius":23,"invMass":0,"pos":[-680,-350],"color":"0e8000","bCoef":0,"cMask":["wall"],"damping":0},{"radius":32,"invMass":0,"pos":[-680,-450],"color":"0e6500","bCoef":0,"cMask":["wall"],"damping":0},{"radius":18,"invMass":0,"pos":[305,-16],"color":"0e6f12","bCoef":0,"cMask":["wall"],"damping":0},{"radius":18,"invMass":0,"pos":[305,-108],"color":"0e6f12","bCoef":0,"cMask":["wall"],"damping":0},{"radius":7,"pos":[0,-28],"color":"111111","bCoef":-5,"cMask":["ball"],"cGroup":["ball"],"damping":0.9867,"speed":[0,0.2],"vis":false},{"radius":7,"pos":[0,-28],"color":"ff0000","bCoef":-5,"cMask":["red"],"cGroup":["red"],"damping":1,"speed":[0,0]},{"radius":7,"pos":[0,-14],"color":"ffff00","bCoef":0,"cMask":["blue"],"cGroup":["blue"],"damping":1,"speed":[0,0]},{"radius":6,"invMass":0,"pos":[311,178],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":6,"invMass":0,"pos":[542,178],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":6,"invMass":0,"pos":[656,178],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":6,"invMass":0,"pos":[771,178],"color":"5777af","bCoef":0,"cGroup":["ball","wall"],"damping":0,"cMask":["red","ball"]},{"radius":6,"invMass":0,"pos":[886,178],"color":"5777af","bCoef":0,"cGroup":["ball","wall"],"damping":0,"cMask":["red","ball"]},{"radius":6,"invMass":0,"pos":[311,291],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":6,"invMass":0,"pos":[311,404],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":6,"invMass":0,"pos":[311,516],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":6,"invMass":0,"pos":[311,630],"color":"5777af","bCoef":0,"cGroup":["ball","wall"],"damping":0,"cMask":["ball"]},{"radius":6,"invMass":0,"pos":[427,178],"color":"5777af","bCoef":0,"cMask":["red","ball"],"cGroup":["ball","wall"],"damping":0},{"radius":30,"invMass":0,"pos":[-542,304.5],"color":"0e7512","bCoef":0,"cMask":["wall"],"damping":0},{"radius":30,"invMass":0,"pos":[233,452],"color":"448022","bCoef":0,"cMask":["wall"],"damping":0},{"radius":26,"invMass":0,"pos":[568,-62.5],"color":"0e8522","bCoef":0,"cMask":["wall"],"damping":0},{"radius":21,"invMass":0,"pos":[221,-460],"color":"2e8522","bCoef":0,"cMask":["wall"],"damping":0},{"radius":21,"invMass":0,"pos":[-121,-460],"color":"0e8522","bCoef":0,"cMask":["wall"],"damping":0},{"radius":21,"invMass":0,"pos":[563,-460],"color":"4e8522","bCoef":0,"cMask":["wall"],"damping":0},{"radius":24,"invMass":0,"pos":[123,162.5],"color":"1e7012","bCoef":0,"cMask":["wall"],"damping":0},{"radius":4,"invMass":0,"pos":[115,330],"color":"aaaaaa","bCoef":0,"cMask":["red","blue"],"damping":0},{"radius":4,"invMass":0,"pos":[0,330],"color":"aaaaaa","bCoef":0,"cMask":["red","blue"],"damping":0},{"radius":4,"invMass":0,"pos":[-115,330],"color":"aaaaaa","bCoef":0,"cMask":["red","blue"],"damping":0},{"radius":7,"pos":[0,0],"color":"111111","bCoef":0,"cMask":["wall"],"cGroup":["wall"],"damping":1.02,"speed":[0,-0.005],"invMass":0.1},{"radius":7,"pos":[0,-14],"color":"111111","bCoef":0,"cMask":["wall"],"cGroup":["wall"],"damping":1.02,"speed":[0,-0.03],"invMass":0.1}],"planes":[{"normal":[0,1],"dist":-630,"bCoef":0,"cMask":["red"]},{"normal":[0,-1],"dist":-630,"bCoef":0,"cMask":["red","blue"]},{"normal":[1,0],"dist":-900,"bCoef":0,"cMask":["red"]},{"normal":[-1,0],"dist":-960,"bCoef":0,"cMask":["red"]},{"bCoef":0,"cMask":["blue"],"dist":-750,"normal":[1,0]},{"bCoef":0,"cMask":["blue"],"dist":-650,"normal":[-1,0]},{"bCoef":0,"cMask":["blue"],"dist":-512,"normal":[0,-1]},{"bCoef":0,"cMask":["blue"],"dist":-510,"normal":[0,1]},{"bCoef":0,"cMask":["blue"],"cGroup":["blueKO","redKO"],"dist":180,"normal":[1,0]},{"bCoef":0,"cMask":["red"],"cGroup":["blueKO","redKO"],"dist":180,"normal":[-1,0]},{"bCoef":0,"cMask":["ball"],"dist":-377.5,"normal":[0,-1]},{"bCoef":0,"cMask":["ball"],"dist":-692,"normal":[-1,0]},{"bCoef":0.5,"cMask":["ball"],"dist":389,"normal":[1,0]},{"bCoef":0,"cMask":["ball"],"dist":277.5,"normal":[0,1]},{"bCoef":0,"cMask":["wall"],"cGroup":["all"],"dist":-451,"normal":[0,-1]}],"traits":{"ballArea":{"vis":false,"bCoef":1,"cMask":["ball"]},"goalPost":{"radius":8,"invMass":0,"bCoef":0.5},"goalNet":{"vis":true,"bCoef":0.1,"cMask":["ball"]},"kickOffBarrier":{"vis":false,"bCoef":0.1,"cGroup":["redKO","blueKO"],"cMask":["red","blue"]}},"playerPhysics":{"bCoef":1000,"invMass":0.5,"damping":0.982,"acceleration":0.077,"kickingAcceleration":0.077,"kickingDamping":0.982,"kickStrength":0},"redSpawnPoints":[[-520,-302.5],[-675,-50],[-466,255],[-402.5,47.5],[-220,0],[757,280]],"blueSpawnPoints":[[410,-62.5],[257.5,310],[417,329],[505,270],[220,0],[610,475]],"ballPhysics":{"bCoef":0,"radius":7,"color":"00cc00","invMass":1.0e-27,"damping":0,"cMask":["ball","red","blue"],"cGroup":["ball"]}}`

var JMap = JSON.parse(Map);

var playerList = {};
var chatFunctions = [getCommands, getDiscord, getStats, setAdmin, setAFK, setBB, setCollision, setLanguage];

var languages = ["en"];

var badwords = {
    tr: [/[a4@][./]m[./][gkq]+/, /[a4@]hm[a4@][gğk]+/, /[a4@]mc[ıi1][gğk]+/, /[a4@]m[ı1]n+/, /[a4@]m[kq]+/, /[a4@]ngu[t₺]+/, /[a4@]n[a4@][ns$5]+/, /[a4@]nn[e€][s$5][ıi1]+/, /[a4@][bp][t₺][a4@][l1]+/, /[a4@]q+/, /[a4@][t₺][a4@]pu[t₺]+/, /[bß][a4@][bß][a4@]n+/, /[bß][o0]k+/, /d[a4@][l1][l1][a4@]m[a4@]+/, /d[a4@]ng[a4@][l1][a4@][gğkq]+/, /[e€][bß][e€][ns$5]+/, /f[a4@]h[ıi1][sş$5][e€]+/, /g[e€]r[ıi1]z[e€]k[a4@]+/, /g[a4@]v[a4@][t₺]+/, /[cg][oö0][t₺][uü][mn]+/, /[cg][oö0][t₺]v[e€]r[e€]n+/, /h[a4@][s$5][s$5][ıi1]k[t₺][ıi1]r+/, /[ıi1][bp]n[e€]+/, /k[a4@]f[ıi1]r+/, /k[a4@]h[bpß][e€]+/, /k[a4@]n[c¢][ıi1]k/, /k[e€]r[ıi1]z+/, /k[e€]v[a4@][sş$5][e€]+/, /[l1][a4@]vu[gğk]+/, /m[./][gkq]+/, /m[o0]r[o0]n+/, /n[o0]n[o0][sş$5]+/, /[o0][./][cç¢]+/, /[o0][cç¢]+/, /[o0][rvw][o0][sş$5][bpß][ıiou]+/, /p[e€]z[e€]v[e€]n[gkq]+/, /p[ıi1][cçj¢]+/, /pu[sş$5][t₺]+/, /s.g+/, /[s$5][a4@][l1][a4@][gğk]+/, /[sşz$5][ıi1!]k[eıikmt₺1]+/, /[sşz$5]+2+[ikmşy]+/, /[sş$5][e€]r[e€]f[sş$5][ıi1]z+/, /[t₺][a4@][sş$5][a4@]k+/, /[t₺][a4@][sş$5][sş$5][a4@]k+/, /v[a4@][l1][ıi1]d[e€][ns]+/, /[y7][a4@]r[a4@][gğkmq]+/, /[y7][a4@]rr[a4@][gğkmq]+/, /[y7][a4@][uv][sş$5][a4@][gğk]+/, /[y7][o0][sş$5]m[a4@]+/],
    en: [/[a4@][s$5][s$5]h[o0][l1][e€]+/, /[bß][a4@]rm[iy7]+/, /[bß][a4@][s$5][t₺][a4@]rd+/, /[bß][ıi1][t₺][cç¢]h+/, /[c¢]un[t₺]+/, /f[uü][cç¢]k+/, /[l1]m[a4@][o0]+/, /[l1]mf[a4@][o0]+/, /pu[s5$][s5$][y7]+/, /r[e€][t₺][a4@]rd+/, /[s$5][t₺]fu+/, /wh[o0]r[e€]+/, /w[t₺]f+/]
};

var roomObject = {
    arrestPoint: {
        X: JMap.redSpawnPoints[JMap.redSpawnPoints.length - 1][0],
        Y: JMap.redSpawnPoints[JMap.redSpawnPoints.length - 1][1],
    },
    borders: {
        MinX: -755,
        MaxX: 655,
        MinY: -515,
        MaxY: 515
    },
    coefficients: {
        points: {
            gameEnd: {
                cops: {
                    losses: 3,
                    wins: 2
                },
                robbers: {
                    losses: 1,
                    wins: 4
                }
            }
        }
    },
    collision: true,
    commandPrefix: "!",
    discordLink: ". https://discord.gg/pm55tVsQMX",
    emojis: ["👀", "👤", "👨‍✈️"],
    gamePauseState: false,
    geo: {
        en: { "code": "id", "lat":-6.17, "lon": 106.859858 }
    },
    isRoomSet: false,
    join: {
        names: {
            length: {
                min: 3,
                max: 15
            }
        }
    },
    locale: languages[0],
    maxPlayers: 20,
    name: {
        tr: "💠 (ʀꜱɪ) 𝗖𝗼𝗽 & 𝗥𝗼𝗯 ᴘᴠᴘ 👨‍✈️👤",
        en: "💠 (ʀꜱɪ) 𝗖𝗼𝗽 & 𝗥𝗼𝗯 ᴘᴠᴘ 👨‍✈️👤",
    },
    noPlayer: true,
    password: null,
    playerStatus: ["PLAYER", "ADMIN"],
    prohibitedPoints: {
        red: {
            circle: [
                { x: -695, y: -460, radius: 35 },
                { x: -580, y: -460, radius: 35 },
                { x: -460, y: -460, radius: 35 },
                { x: -695, y: -355, radius: 35 },
                { x: -580, y: -355, radius: 35 },
                { x: -460, y: -355, radius: 35 },
                { x: -695, y: -250, radius: 35 },
                { x: -580, y: -250, radius: 35 },
                { x: -460, y: -250, radius: 35 },
                { x: 305, y: -110, radius: 15 },
                { x: 305, y: -15, radius: 15 },
            ],
            corner: [
                { x: -755 + JMap.playerPhysics.radius, y: -515 + JMap.playerPhysics.radius },
                { x: -755 + JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: 655 - JMap.playerPhysics.radius, y: -515 + JMap.playerPhysics.radius },
                { x: 655 - JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: -350 - JMap.playerPhysics.radius, y: -515 + JMap.playerPhysics.radius },
                { x: -350 + JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: -350 - JMap.playerPhysics.radius, y: -180 - JMap.playerPhysics.radius },
                { x: -755 + JMap.playerPhysics.radius, y: -190 - JMap.playerPhysics.radius },
                { x: -755 + JMap.playerPhysics.radius, y: -190 + JMap.playerPhysics.radius },
                { x: -600 - JMap.playerPhysics.radius, y: -190 + JMap.playerPhysics.radius },
                { x: -600 + JMap.playerPhysics.radius, y: -180 + JMap.playerPhysics.radius },
                { x: -755 + JMap.playerPhysics.radius, y: 90 - JMap.playerPhysics.radius },
                { x: -755 + JMap.playerPhysics.radius, y: 90 + JMap.playerPhysics.radius },
                { x: -600 - JMap.playerPhysics.radius, y: 90 - JMap.playerPhysics.radius },
                { x: -530 + JMap.playerPhysics.radius, y: -80 + JMap.playerPhysics.radius },
                { x: -360 - JMap.playerPhysics.radius, y: 90 - JMap.playerPhysics.radius },
                { x: -150 - JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: -150 + JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: -150 + JMap.playerPhysics.radius, y: 410 + JMap.playerPhysics.radius },
                { x: 150 - JMap.playerPhysics.radius, y: 410 + JMap.playerPhysics.radius },
                { x: 150 - JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: 150 + JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: -150 + JMap.playerPhysics.radius, y: -250 + JMap.playerPhysics.radius },
                { x: 150 - JMap.playerPhysics.radius, y: -250 + JMap.playerPhysics.radius },
                { x: 150 - JMap.playerPhysics.radius, y: -80 - JMap.playerPhysics.radius },
                { x: -150 + JMap.playerPhysics.radius, y: -80 - JMap.playerPhysics.radius },
                { x: -150 + JMap.playerPhysics.radius, y: 80 + JMap.playerPhysics.radius },
                { x: 150 - JMap.playerPhysics.radius, y: 80 + JMap.playerPhysics.radius },
                { x: 150 - JMap.playerPhysics.radius, y: 250 - JMap.playerPhysics.radius },
                { x: -150 + JMap.playerPhysics.radius, y: 250 - JMap.playerPhysics.radius },
                { x: 270 + JMap.playerPhysics.radius, y: -245 + JMap.playerPhysics.radius },
                { x: 470 - JMap.playerPhysics.radius, y: -245 + JMap.playerPhysics.radius },
                { x: 470 - JMap.playerPhysics.radius, y: 120 - JMap.playerPhysics.radius },
                { x: 270 + JMap.playerPhysics.radius, y: 120 - JMap.playerPhysics.radius },
                { x: 270 + JMap.playerPhysics.radius, y: 15 + JMap.playerPhysics.radius },
                { x: 350 - JMap.playerPhysics.radius, y: 15 - JMap.playerPhysics.radius },
                { x: 350 - JMap.playerPhysics.radius, y: -140 + JMap.playerPhysics.radius },
                { x: 270 + JMap.playerPhysics.radius, y: -140 - JMap.playerPhysics.radius },
                { x: 355 - JMap.playerPhysics.radius, y: 120 + JMap.playerPhysics.radius },
                { x: 375 + JMap.playerPhysics.radius, y: 120 - JMap.playerPhysics.radius },
                { x: 655 - JMap.playerPhysics.radius, y: 140 - JMap.playerPhysics.radius },
                { x: 655 - JMap.playerPhysics.radius, y: 160 + JMap.playerPhysics.radius },
                { x: 655 - JMap.playerPhysics.radius, y: 445 - JMap.playerPhysics.radius },
                { x: 575 - JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: 375 + JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius },
                { x: 355 - JMap.playerPhysics.radius, y: 515 - JMap.playerPhysics.radius }
            ]
        },
        blue: {
            circle: [
                { x: -695, y: -460, radius: 35 },
                { x: -580, y: -460, radius: 35 },
                { x: -460, y: -460, radius: 35 },
                { x: -695, y: -355, radius: 35 },
                { x: -580, y: -355, radius: 35 },
                { x: -460, y: -355, radius: 35 },
                { x: -695, y: -250, radius: 35 },
                { x: -580, y: -250, radius: 35 },
                { x: -460, y: -250, radius: 35 },
                { x: 305, y: -110, radius: 15 },
                { x: 305, y: -15, radius: 15 },
                { x: -445, y: 5, radius: 45 }
            ],
            corner: [
                { x: Infinity, y: Infinity }
            ],
            gate: {
                MinX: 365,
                MaxX: 650,
                MinY: 150,
                MaxY: 515
            }
        }
    },
    public: true,
    recaptcha: false,
    scoreLimit: 0,
    teams: ["spectators", "red", "blue"],
    teamsLock: true,
    timeLimit: 3,
    timeouts: {
        AFK: 10000,
        bugging: {
            circle: 7000,
            corner: 700
        }
    },
    timers: {
        gameEndCheck: 0
    },
    token: null,
    tolerances: {
        arrest: 0.01,
        badwords: 2,
        bugging: {
            red: {
                circle: 0,
                corner: 0
            },
            blue: {
                circle: 0,
                corner: 0,
                gate: 1
            }
        }
    }
}

var commands = {
    tr: {
        "!admin": setAdmin,
        "!afk": setAFK,
        "!bb": setBB,
        "!çarpışma": setCollision,
        "!dc": getDiscord,
        "!dil": setLanguage,
        "!discord": getDiscord,
        "!istatistikler": getStats,
        "!komutlar": getCommands
    },
    en: {
        "!admin": setAdmin,
        "!afk": setAFK,
        "!bb": setBB,
        "!collision": setCollision,
        "!commands": getCommands,
        "!dc": getDiscord,
        "!discord": getDiscord,
        "!lang": setLanguage,
        "!stats": getStats,
    }
}

var colors = {
    AdminChange: {
        Rollback: 0xFF0000
    },
    Chat: {
        AFK: [0x00FF00, 0x00FF00],
        Badwords: 0xFF0000,
        Collision: [0x00FF00, 0x00FF00],
        Commands: [0xFFFFFF, 0xFFDB72],
        Discord: 0xFFFFFF,
        Message: [0xFFFFFF, 0xFFDB72],
        NoAuthorization: {
            Collision: [0xFF0000, 0xFF0000]
        },
        NotACommand: 0xFF0000,
        LanguageSwitch: {
            Fail: 0xFFFF00,
            Success: 0x00FF00
        },
        Stats: {
            Info: 0x00FFFF,
            List: 0xFFFFFF
        }
    },
    StadiumChange: {
        NoAuthorization: 0xFF0000
    },
    Start: 0xFFFFFF,
    TeamChange: {
        Rollback: 0xFF0000
    },
    Tick: {
        AFK: {
            Warning: 0xFFFF00
        },
        Bugging: {
            Warning: 0xFFFF00
        },
        GameEnd: [0xE56E56, 0x5689E5]
    }
};

var fonts = {
    AdminChange: {
        Rollback: "bold"
    },
    Chat: {
        AFK: ["normal", "normal"],
        Badwords: "bold",
        Collision: ["normal", "normal"],
        Commands: ["normal", "normal"],
        Discord: "normal",
        LanguageSwitch: {
            Fail: "bold",
            Success: "normal"
        },
        Message: ["normal", "bold"],
        NoAuthorization: {
            Collision: ["bold", "bold"]
        },
        NotACommand: "bold",
        Stats: {
            Info: "normal",
            List: "normal"
        }
    },
    StadiumChange: {
        NoAuthorization: "normal"
    },
    Start: "normal",
    TeamChange: {
        Rollback: "bold"
    },
    Tick: {
        AFK: {
            Warning: "bold"
        },
        Bugging: {
            Warning: "bold"
        },
        GameEnd: ["bold", "bold"]
    }
};

var sounds = {
    AdminChange: {
        Rollback: 2
    },
    Chat: {
        AFK: [1, 1],
        Badwords: 2,
        Collision: [1, 1],
        Commands: [1, 1],
        Discord: 1,
        LanguageSwitch: {
            Fail: 2,
            Success: 1
        },
        Message: [1, 1],
        NoAuthorization: {
            Collision: [2, 2]
        },
        NotACommand: 2,
        Stats: {
            Info: 1,
            List: 0
        }
    },
    StadiumChange: {
        NoAuthorization: 2
    },
    Start: 1,
    TeamChange: {
        Rollback: 2
    },
    Tick: {
        AFK: {
            Warning: 2
        },
        Bugging: {
            Warning: 2
        },
        GameEnd: [1, 1]
    }
};

var kickTypes = {
    Chat: {
        Badwords: true,
        SeeOff: false
    },
    Join: {
        Names: {
            Badwords: true,
            Improper: false,
            Length: false
        }
    },
    Tick: {
        AFK: false,
        Bugging: true
    }
};

var locales = {
    tr: {
        AdminChange: {
            Log: [["isimli oyuncunun adminliği alındı", "isimli oyuncuya adminlik verildi"], ["isimli oyuncunun adminliği bir oyuncu tarafından alındı", "isimli oyuncuya bir oyuncu tarafından adminlik verildi"]],
            Rollback: ["Başka bir oyuncuya adminlik veremezsiniz!", "Başka bir oyuncunun adminliğini alamazsınız!"]
        },
        Chat: {
            AFK: ["AFK değilsiniz!", "AFK oldunuz!"],
            Badwords: {
                Kick: "Odamızda küfür/hakaret içerikli kelimeler kullanmak yasaktır.",
                Warning: "Odamızda küfür/hakaret içerikli kelimeler kullanmak yasaktır. Tekrar etmeniz hâlinde banlanacaksınız!",
            },
            Collision: ["Çarpışma özelliği kapatıldı!", "Çarpışma özelliği açıldı!"],
            Commands: ["Kullanılabilir komutlar: !admin, !afk, !bb, !dc, !dil [Dil kodu], !discord, !istatistikler, !komutlar", "Kullanılabilir komutlar: !admin, !afk, !bb, !çarpışma, !dc, !dil [Dil kodu], !discord, !istatistikler, !komutlar"],
            Discord: `Discord adresimiz: ${roomObject.discordLink}`,
            LanguageSwitch: {
                Fail: `Dil değiştirme işlemi başarısız! Kullanılabilir dil kodları: ${languages.toString()}`,
                Success: "Diliniz başarıyla değiştirildi:"
            },
            NoAuthorization: {
                Collision: ["Çarpışma özelliğini açmak için yetkiniz bulunmamaktadır!", "Çarpışma özelliğini kapatmak için yetkiniz bulunmamaktadır!"]
            },
            NotACommand: "Böyle bir komut yok! Kullanılabilir komutları görmek için !komutlar yazınız.",
            SeeOff: "Görüşmek üzere.",
            Stats: {
                Cops: {
                    Losses: "Poliste kaybetme:",
                    Wins: "Poliste kazanma:"
                },
                Info: "İstatistikleriniz aşağıdaki gibidir:\n",
                Points: "Toplam puan:",
                Robbers: {
                    Losses: "Hırsızda kaybetme:",
                    Wins: "Hırsızda kazanma:"
                }
            }
        },
        Join: {
            Duplicated: {
                Account: "Birden fazla sekmeyle odaya giriş yapmak yasaktır.",
                Name: "Bu isimde biri zaten var."
            },
            Log: {
                Success: "odaya katıldı"
            },
            Names: {
                Badwords: "Odamıza küfür/hakaret içerikli isimlerle giriş yapmak yasaktır.",
                Improper: "İsminizin sağında/solunda boşluk karakteri bulunamaz ve isminiz çifte boşluk karakteri içeremez.",
                Length: {
                    Min: `İsminiz en az ${roomObject.join.names.length.min} karakterli olmalıdır.`,
                    Max: `İsminiz en fazla ${roomObject.join.names.length.max} karakterli olmalıdır.`
                }
            }
        },
        Kick: {
            Log: [["kicklendi", "banlandı"], ["bir kişi tarafından kicklendi", "bir kişi tarafından banlandı"]]
        },
        Leave: {
            Log: "odadan ayrıldı"
        },
        Link: {
            Log: "Oda kuruldu, link:"
        },
        Pause: {
            Log: ["Oyun duraklatıldı", "Oyun bir kişi tarafından duraklatıldı:"]
        },
        StadiumChange: {
            Log: ["isimli stadyum yüklendi", "isimli stadyum bir kişi tarafından yüklendi:"],
            NoAuthorization: "Stadyumu değiştirmek için yetkiniz bulunmamaktadır!"
        },
        Start: {
            Info: `Oyun başladı. ${roomObject.scoreLimit} dakika sonunda sahada hırsız kalmazsa polisler kazanır; aksi durumda hırsızlar kazanır.`,
            Log: ["Oyun başlatıldı", "Oyun bir kişi tarafından başlatıldı:"]
        },
        Stop: {
            Log: ["Oyun durduruldu", "Oyun bir kişi tarafından durduruldu:"]
        },
        Unpause: {
            Log: ["Oyun devam ettirildi", "Oyun bir kişi tarafından devam ettirildi:"]
        },
        TeamChange: {
            Log: [["isimli oyuncu izleyicilere taşındı", "isimli oyuncu bir kişi tarafından izleyicilere taşındı"], ["isimli oyuncu kırmızı takıma taşındı", "isimli oyuncu bir kişi tarafından kırmızı takıma taşındı"], ["isimli oyuncu mavi takıma taşındı", "isimli oyuncu bir kişi tarafından mavi takıma taşındı"]],
            Rollback: "Oyuncu takımları sadece bot tarafından değiştirilebilir!"
        },
        Tick: {
            AFK: {
                Kick: "AFK",
                Warning: `AFK kalmaya devam ederseniz ${roomObject.timeouts.AFK / 60} saniye sonunda odadan atılacaksınız!`
            },
            Bugging: {
                Circle: {
                    Kick: `Disc içlerinde ${roomObject.timeouts.bugging.circle / 60} saniyeden uzun süre kalmak yasaktır.`,
                    Warning: `Disc içlerinde ${roomObject.timeouts.bugging.circle / 60} saniyeden uzun süre kalmanız yasaktır. Lütfen en kısa sürede bulunduğunuz konumu terk ediniz!`
                },
                Corner: {
                    Kick: `Köşelerde ${roomObject.timeouts.bugging.corner / 60} saniyeden uzun süre kalmak yasaktır.`,
                    Warning: `Köşelerde ${roomObject.timeouts.bugging.corner / 60} saniyeden uzun süre kalmanız yasaktır. Lütfen en kısa sürede bulunduğunuz konumu terk ediniz!`
                }
            },
            GameEnd: ["Hırsızlar kazandı!", "Polisler kazandı!"]
        }
    },
    en: {
        AdminChange: {
            Log: [["'s admin rights was taken away", "was given admin rights"], ["'s admin rights was taken by", "was given admin rights by"]],
            Rollback: ["You cannot give admin rights to another player!", "You cannot take admin rights of another player!"]
        },
        Chat: {
            AFK: ["You are now with us!", "You are now AFK!"],
            Badwords: {
                Kick: "It's strictly prohibited to use bad words in this room.",
                Warning: "It's strictly prohibited to use bad words in this room. Please remember that a further attempt will result in ban.",
            },
            Collision: ["Collision is now turned off!", "Collision is now turned on!"],
            Commands: ["Available commands: !admin, !afk, !bb, !commands, !dc, !discord, !lang [Code], !stats", "Kullanılabilir komutlar: !admin, !afk, !bb, !collision, !commands, !dc, !discord, !lang [Code], !stats"],
            Discord: `Our discord server: ${roomObject.discordLink}`,
            LanguageSwitch: {
                Fail: `Language switch failed! Available language codes: ${languages.toString()}`,
                Success: "Your language was successfully changed to:"
            },
            NoAuthorization: {
                Collision: ["You have no authorization to turn on the collision feature!", "You have no authorization to turn off the collision feature!"],
                StadiumChange: "You have no authorization to change stadium in this room!"
            },
            NotACommand: "There's no such a command. Please type !commands to see the available commands.",
            SeeOff: "Bye.",
            Stats: {
                Cops: {
                    Losses: "Losses in cops:",
                    Wins: "Wins in cops:"
                },
                Info: "Your statistics below:\n",
                Points: "Total points:",
                Robbers: {
                    Losses: "Loss in robbers:",
                    Wins: "Wins in robbers:"
                }
            }
        },
        Join: {
            Duplicated: {
                Account: "Joining with multiple accounts from the same source is not allowed in this room.",
                Name: "A player with this such name already exists!"
            },
            Log: {
                Success: "has joined"
            },
            Names: {
                Badwords: "Bad name.",
                Improper: "Names start or end with blank character or contain duplicated blank character are not allowed in this room!",
                Length: {
                    Min: `Your name should have ${roomObject.join.names.length.min} characters at least.`,
                    Max: `Your name should have ${roomObject.join.names.length.max} characters at most.`
                }
            }
        },
        Kick: {
            Log: [["was kicked", "banlandı."], ["was kicked by", "was banned by"]]
        },
        Leave: {
            Log: "has left"
        },
        Link: {
            Log: "Room set, link:"
        },
        Pause: {
            Log: ["Game paused", "Game paused by"]
        },
        StadiumChange: {
            Log: ["was loaded", "was loaded by"],
            NoAuthorization: "You have no authorization to change stadium!"
        },
        Start: {
            Info: `Game started. In ${roomObject.scoreLimit == 1 ? roomObject.scoreLimit + " minute, " : " minutes, "} cops win if there are robbers in the pitch, otherwise robbers win.`,
            Log: ["Game started", "Game started by"]
        },
        Stop: {
            Log: ["Game stopped", "Game stopped by"]
        },
        Unpause: {
            Log: ["Game unpaused", "Game unpaused by"]
        },
        TeamChange: {
            Log: [["was moved to spectators", "was moved to spectators by"], ["was moved to red", "was moved to red by"], ["was moved to blue", "was moved to blue by"]],
            Rollback: "Only the host can change player teams!"
        },
        Tick: {
            AFK: {
                Kick: "AFK timeout",
                Warning: `You will be kicked at the end of ${roomObject.timeouts.AFK / 60 == 1 ? roomObject.timeouts.AFK / 60 + " second " : " seconds "} if you go ahead on staying AFK!`
            },
            Bugging: {
                Circle: {
                    Kick: `It's strictly prohibited to be in discs for more than ${roomObject.timeouts.bugging.circle / 60 == 1 ? roomObject.timeouts.bugging.circle + " second " : " seconds "} in this room.`,
                    Warning: `It's strictly prohibited to be in discs for more than ${roomObject.timeouts.bugging.circle / 60 == 1 ? roomObject.timeouts.bugging.circle + " second. " : " seconds. "} Please leave your location as fast as possible!`,
                },
                Corner: {
                    Kick: `It's strictly prohibited to lean at corners for more than ${roomObject.timeouts.bugging.corner / 60 == 1 ? roomObject.timeouts.bugging.corner + " second " : " seconds "} in this room.`,
                    Warning: `It's strictly prohibited to lean at corners for more than ${roomObject.timeouts.bugging.corner / 60 == 1 ? roomObject.timeouts.bugging.corner + " second. " : " seconds. "} Please leave your location as fast as possible!`,
                }
            },
            GameEnd: ["Robbers won!", "Cops won!"]
        }
    }
};

geo = roomObject.geo[languages[languages.indexOf(roomObject.locale)]]

var room = HBInit({ roomName: roomObject.name[roomObject.locale], noPlayer: roomObject.noPlayer, public: roomObject.public, maxPlayers: roomObject.maxPlayers, geo });

var cf = room.CollisionFlags;

var collisionOff_cGroups = [cf.c0, cf.c1]; //When collision is turned on
var collisionOn_cGroups = [cf.red, cf.blue]; //When collision is turned off
var collision_cGroups = [collisionOff_cGroups, collisionOn_cGroups];
var cGroups = [collisionOff_cGroups, collisionOn_cGroups];

var collisionOff_cMasks = [cf.c1, cf.c0]; //When collision is turned on
var collisionOn_cMasks = [cf.blue, cf.red]; //When collision is turned off
var collision_cMasks = [collisionOff_cMasks, collisionOn_cMasks];
var cMasks = [collisionOff_cMasks, collisionOn_cMasks];

var bias_cMasks = [cf.c2, cf.c3]; //When a player is inside a circle or on gate
var bias_cGroups = [cf.c2, cf.c3]; //When a player is inside a circle or on gate

/*COMMAND FUNCTIONS*/

function getCommands(player, message) {
    room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.Commands[Number(player.admin)]}`, player.id, colors.Chat.Commands[Number(player.admin)], fonts.Chat.Commands[Number(player.admin)], sounds.Chat.Commands[Number(player.admin)]);
    return false;
}

function getDiscord(player, message) {
    room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.Discord}`, player.id, colors.Chat.Discord, fonts.Chat.Discord, sounds.Chat.Discord);
    return false;
}

function getStats(player, message) {
    room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.Stats.Info}`, player.id, colors.Chat.Stats.Info, fonts.Chat.Stats.Info, sounds.Chat.Stats.Info);
    room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.Stats.Cops.Wins} ${playerList[player.name].cops.wins}\n${locales[playerList[player.name].language].Chat.Stats.Cops.Losses} ${playerList[player.name].cops.losses}\n${locales[playerList[player.name].language].Chat.Stats.Robbers.Wins} ${playerList[player.name].robbers.wins}\n${locales[playerList[player.name].language].Chat.Stats.Robbers.Losses} ${playerList[player.name].robbers.losses}\n${locales[playerList[player.name].language].Chat.Stats.Points} ${playerList[player.name].points}`, player.id, colors.Chat.Stats.List, fonts.Chat.Stats.List, sounds.Chat.Stats.List);
    return false;
}

function setAdmin(player, message) {
    room.setPlayerAdmin(player.id, !player.admin);
    return false;
}

function setAFK(player, message) {
    playerList[player.name].afkStatus = !playerList[player.name].afkStatus;
    room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.AFK[Number(playerList[player.name].afkStatus)]}`, player.id, colors.Chat.AFK[Number(playerList[player.name].afkStatus)], fonts.Chat.AFK[Number(playerList[player.name].afkStatus)], sounds.Chat.AFK[Number(playerList[player.name].afkStatus)]);
    if (playerList[player.name].afkStatus == true) {
        room.setPlayerTeam(player.id, 0);
        updateAdmins2(player);
    }
    equateTeams();
    return false;
}

function setBB(player, message) {
    room.kickPlayer(player.id, `${locales[playerList[player.name].language].Chat.SeeOff}`, kickTypes.Chat.SeeOff);
    return false;
}

function setCollision(player, message) {
    if (player.admin == true) {
        roomObject.collision = !roomObject.collision;
        room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.Collision[Number(roomObject.collision)]}`, player.id, colors.Chat.Collision[Number(roomObject.collision)], fonts.Chat.Collision[Number(roomObject.collision)], sounds.Chat.Collision[Number(roomObject.collision)]);
        changeCollisionStatus();
    }
    else {
        room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.NoAuthorization.Collision[Number(roomObject.collision)]}`, player.id, colors.Chat.NoAuthorization.Collision[Number(roomObject.collision)], fonts.Chat.NoAuthorization.Collision[Number(roomObject.collision)], sounds.Chat.NoAuthorization.Collision[Number(roomObject.collision)]);
        return false;
    }
}

function setLanguage(player, message) {
    var language = message.toLowerCase().split(" ")[1];
    if (languages.includes(language) == false) {
        room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.LanguageSwitch.Fail}`, player.id, colors.Chat.LanguageSwitch.Fail, fonts.Chat.LanguageSwitch.Fail, sounds.Chat.LanguageSwitch.Fail);
        return false;
    }
    else {
        playerList[player.name].language = language;
        room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.LanguageSwitch.Success} ${language}`, player.id, colors.Chat.LanguageSwitch.Success, fonts.Chat.LanguageSwitch.Success, sounds.Chat.LanguageSwitch.Success);
        return false;
    }
}

/*GAME FUNCTIONS*/

function addPlayerTeam(player) {
    playerList[player.name].teams.push(player.team);
}

function bustingCheck() {
    if (roomObject.collision == false) {
        var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null);
        for (var i = 0; i < players.length; i++) {
            for (var j = 0; j < i; j++) {
                bustPlayerOnArrest(players[j], players[i]);
            }
        }
    }
}

function bustPlayerOnArrest(p1, p2) {
    if (roomObject.collision == false) {
        var players = [p1, p2];
        if (checkIfArrest(p1, p2) == true) {
            p1 = players.find(p => p.team == 1);
            if (room.getPlayerDiscProperties(p1.id) != null) {
                if (isPlayerAtArrestPoint(p1) == false) {
                    room.setPlayerDiscProperties(p1.id, { x: JMap.redSpawnPoints[JMap.redSpawnPoints.length - 1][0], y: JMap.redSpawnPoints[JMap.redSpawnPoints.length - 1][1], xspeed: 0, yspeed: 0 });
                }
            }
        }
    }
}

function changeCollisionStatus() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null);
    players.forEach(p => {
        room.setPlayerDiscProperties(p.id, { cGroup: collision_cGroups[Number(roomObject.collision)][p.team - 1], cMask: collision_cMasks[Number(roomObject.collision)][p.team - 1] });
    });
}

function checkForEndGame() {
    var scores = room.getScores();
    if (scores != null) {
        var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null);
        var inPitchPlayers = players.filter(p => isPlayerInPitch(p) == true);
        var reds = players.filter(p => p.team == 1);
        var blues = players.filter(p => p.team == 2);
        var difference = reds.length - blues.length;

        if (roomObject.timeLimit * 60 <= scores.time && scores.time <= roomObject.timeLimit * 60 + 1 / 60) {
            if (inPitchPlayers.length == 0) {
                reds.forEach(r => {
                    playerList[r.name].robbers.losses++;
                    playerList[r.name].points -= (difference + roomObject.coefficients.points.gameEnd.robbers.losses);
                });
                blues.forEach(b => {
                    playerList[b.name].cops.wins++;
                    playerList[b.name].points += (difference + roomObject.coefficients.points.gameEnd.cops.wins); // corrected variable b
                });
            } else {
                reds.forEach(r => {
                    playerList[r.name].robbers.wins++;
                    playerList[r.name].points += (difference + roomObject.coefficients.points.gameEnd.robbers.wins);
                });
                blues.forEach(b => {
                    playerList[b.name].cops.losses++;
                    playerList[b.name].points -= (difference + roomObject.coefficients.points.gameEnd.cops.losses); // corrected variable b
                });
            }
            room.sendAnnouncement(`${locales[roomObject.locale].Tick.GameEnd[Number(inPitchPlayers.length == 0)]}`, null, colors.Tick.GameEnd[Number(inPitchPlayers.length == 0)], fonts.Tick.GameEnd[Number(inPitchPlayers.length == 0)], sounds.Tick.GameEnd[Number(inPitchPlayers.length == 0)]);
            room.stopGame();
        } else if (scores.time < roomObject.timeLimit * 60) {
            if (reds.length == 0 || blues.length == 0) {
                room.stopGame();
            } else {
                if (inPitchPlayers.length == 0) {
                    roomObject.timers.gameEndCheck++;
                    if (1 <= roomObject.timers.gameEndCheck && roomObject.timers.gameEndCheck < 2) {
                        room.sendAnnouncement(`${locales[roomObject.locale].Tick.GameEnd[Number(inPitchPlayers.length == 0)]}`, null, colors.Tick.GameEnd[Number(inPitchPlayers.length == 0)], fonts.Tick.GameEnd[Number(inPitchPlayers.length == 0)], sounds.Tick.GameEnd[Number(inPitchPlayers.length == 0)]);
                        reds.forEach(r => {
                            playerList[r.name].robbers.losses++;
                            playerList[r.name].points -= (difference + roomObject.coefficients.points.gameEnd.robbers.losses);
                        });
                        blues.forEach(b => {
                            playerList[b.name].cops.wins++;
                            playerList[b.name].points += (difference + roomObject.coefficients.points.gameEnd.cops.wins); // corrected variable b
                        });
                    }
                    room.stopGame();
                }
            }
        }
    }
}


function checkIfArrest(p1, p2) {
    return checkIfOpponents(p1, p2) && checkIfTouching(p1, p2);
}

function checkIfOpponents(p1, p2) {
    return (p1 != undefined && p2 != undefined) && (p1.id != p2.id) && (p1.team != p2.team);
}

function checkIfTouching(p1, p2) {
    return (room.getPlayerDiscProperties(p1.id) != null && room.getPlayerDiscProperties(p2.id) != null) && (pointDistance(room.getPlayerDiscProperties(p1.id), room.getPlayerDiscProperties(p2.id)) < room.getPlayerDiscProperties(p1.id).radius + room.getPlayerDiscProperties(p2.id).radius + roomObject.tolerances.arrest);
}

function equateTeams() {
    var players = room.getPlayerList().filter(p => playerList[p.name].afkStatus == false);
    var spectators = players.filter(p => p.team == 0);
    var reds = players.filter(p => p.team == 1);
    var blues = players.filter(p => p.team == 2);
    var teams = [reds, blues];

    if (reds.length > 0 && blues.length > 0) {
        if (Math.abs(reds.length - blues.length) > 1) {
            var difference = reds.length - blues.length;

            if (Math.sign(difference) == 1) {
                console.log("1");
                for (var i = reds.length - 1; i > reds.length - 1 - Math.floor(difference / 2); i--) {
                    room.setPlayerTeam(reds[i].id, 2);
                }
                if (spectators.length == 0) {
                    return false;
                }
                else {
                    spectators.forEach(s => {
                        room.setPlayerTeam(s.id, 2);
                    });
                }
            }
            else if (Math.sign(difference) == -1) {
                console.log("-1");
                for (var i = reds.length - 1; i > reds.length - 1 - Math.floor(difference / 2); i--) {
                    room.setPlayerTeam(reds[i].id, 2);
                }
                if (spectators.length == 0) {
                    return false;
                }
                else {
                    spectators.forEach(s => {
                        room.setPlayerTeam(s.id, 2);
                    });
                }
            }

            if (Math.abs(reds.length - blues.length) == 1) {
                var difference2 = reds.length - blues.length;
                if (spectators.length == 0) {
                    return false;
                }
                else {
                    spectators.forEach(s => {
                        Math.sign(difference2) == 1 ? room.setPlayerTeam(s.id, 2) : room.setPlayerTeam(s.id, 1);
                    });
                }
            }
            else {
                var difference2 = reds.length - blues.length;
                if (spectators.length == 0) {
                    for (var t in teams) {
                        for (var i = t.length - 1; i > t.length - 1 - Math.floor(difference / 2); i--) {
                            room.setPlayerTeam(t[i].id, 2 - teams.indexOf(t));
                        }
                    }
                }
                else {
                    spectators.forEach(s => {
                        Math.sign(difference2) == 1 ? room.setPlayerTeam(s.id, 2) : room.setPlayerTeam(s.id, 1);
                    });
                }
            }
        }
        else {
            if (spectators.length != 0) {
                var difference = reds.length - blues.length;
                Math.sign(difference) == 1 ? room.setPlayerTeam(spectators[0].id, 2) : room.setPlayerTeam(spectators[0].id, 1);
            }
        }
    }
}

function equateTeamsOnJoin() {
    var players = room.getPlayerList().filter(p => playerList[p.name].afkStatus == false);
    var spectators = players.filter(p => p.team == 0);
    var reds = players.filter(p => p.team == 1);
    var blues = players.filter(p => p.team == 2);
    var difference = reds.length - blues.length;

    if (players.length == 2) {
        if (reds.length == 0 && blues.length == 0) {
            spectators.forEach(s => room.setPlayerTeam(s.id, 1 + spectators.indexOf(s)));
        }
        else {
            if (reds.length == 0 && blues.length != 0) {
                room.setPlayerTeam(spectators[0].id, 1);
                if (room.getScores() == null) room.startGame();
            }
            else if (reds.length != 0 && blues.length == 0) {
                room.setPlayerTeam(spectators[0].id, 2);
                if (room.getScores() == null) room.startGame();
            }
            else {
                if (room.getScores() == null) room.startGame();
            }
        }
    }
    else if (players.length > 2) {
        if (reds.length == 0 && blues.length == 0) {
            spectators.forEach(s => room.setPlayerTeam(s.id, 1 + (spectators.indexOf(s) % 2)));
            if (room.getScores() == null) room.startGame();
        }
        else {
            if (reds.length == 0 && blues.length != 0) {
                spectators.forEach(s => room.setPlayerTeam(s.id, 1));
                if (room.getScores() == null) room.startGame();
            }
            else if (reds.length != 0 && blues.length == 0) {
                spectators.forEach(s => room.setPlayerTeam(s.id, 2));
                if (room.getScores() == null) room.startGame();
            }
            else {
                Math.sign(difference) == 1 ? room.setPlayerTeam(spectators[0].id, 2) : room.setPlayerTeam(spectators[0].id, 1);
            }
        }
    }
}

/* function fillCircle(circle) {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null);
    var circleIndexes = findRoomObjectIndexOfCircle(circle);
    var JMapIndex = findJMapIndexOfCircle(circle);
    var team = 0;

    if ((circleIndexes.red !== -1 || circleIndexes.blue !== -1) && JMapIndex !== -1) {
        var playerInsideCircle = findPlayerInsideCircle(circle);
        if(circleIndexes.red !== -1) team = 1;
        if(circleIndexes.blue !== -1) team = 2;
        if (playerInsideCircle.length == 0) {
            if ((team == 1 && room.getDiscProperties(JMapIndex + 1).cMask != cf.wall) || (team == 2 && room.getDiscProperties(JMapIndex + 1).cMask != cf.red | cf.c0)) {
                room.setDiscProperties(JMapIndex + 1, { cMask: cf.wall });

                var playersSet = players.filter(p => isPlayerInCircle(p) == false && room.getPlayerDiscProperties(p.id).cGroup != cGroups[Number(roomObject.collision)][p.team - 1]);
                playersSet.forEach(p => {
                    room.setPlayerDiscProperties(p.id, { cGroup: cGroups[Number(roomObject.collision)][p.team - 1] });
                })
            }
        }
        else {
            var player = playerInsideCircle[0];
            if ((room.getDiscProperties(JMapIndex + 1).cMask & bias_cMasks[player.team - 1]) == 0) {
                room.setDiscProperties(JMapIndex + 1, { cMask: room.getDiscProperties(JMapIndex + 1).cMask | bias_cMasks[player.team - 1] });

                var others = players.filter(p => p.id != player.id && p.team == player.team && isPlayerInCircle(p) == false);
                others.forEach(o => {
                    room.setPlayerDiscProperties(o.id, { cGroup: room.getPlayerDiscProperties(o.id).cGroup | bias_cGroups[o.team - 1] });
                });
            }
        }
    }
}

function fillCircles() {
    if (roomObject.collision == true) {
        roomObject.prohibitedPoints.red.circle.forEach(r => fillCircle(r));
        roomObject.prohibitedPoints.blue.circle.forEach(b => fillCircle(b));
    }
} */

function fillGateArea() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerOnGate(p) == true);

    if (players.length >= roomObject.tolerances.bugging.blue.gate) {
        var others = players.filter(p => players.indexOf(p) != 0 && (room.getPlayerDiscProperties(p.id).cGroup & cf.score) == 0);
        others.forEach(p => {
            room.setPlayerDiscProperties(p.id, { cGroup: room.getPlayerDiscProperties(p.id).cGroup | cf.score });
        });

        var blues = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && p.team == 2 && isPlayerOnGate(p) == false);
        blues.forEach(p => {
            room.setPlayerDiscProperties(p.id, { cGroup: room.getPlayerDiscProperties(p.id).cGroup | cf.score });
        });
    }
    else {
        var _players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && p.team == 2 && isPlayerOnGate(p) == false && (room.getPlayerDiscProperties(p.id).cGroup & cf.score) != 0);
        _players.forEach(p => {
            room.setPlayerDiscProperties(p.id, { cGroup: cGroups[p.team - 1][Number(roomObject.collision)] });
        });
    }
}

/* function findCircleHidesPlayer(player) {
    return roomObject.prohibitedPoints[roomObject.teams[player.team]].circle.find(c => pointDistance({ x: c.x, y: c.y }, room.getPlayerDiscProperties(player.id)) < c.radius - room.getPlayerDiscProperties(player.id).radius);
}

function findJMapIndexOfCircle(circle) {
    return JMap.discs.findIndex(d => d.pos != undefined && d.pos[0] == circle.x && d.pos[1] == circle.y);
}

function findPlayerInsideCircle(circle) {
    return room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerInCircle(p) == true && findCircleHidesPlayer(p).x == circle.x && findCircleHidesPlayer(p).y == circle.y);
}

function findRoomObjectIndexOfCircle(circle) {
    return { red: roomObject.prohibitedPoints.red.circle.indexOf(circle), blue: roomObject.prohibitedPoints.blue.circle.indexOf(circle) };
} */

function getPreviousTeam(player) {
    var teams = playerList[player.name].teams;
    var previousTeam = 0;
    previousTeam = teams.length == 0 ? 0 : teams[teams.length - 1];
    return previousTeam;
}

function increaseAFKTime() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerAFK(p) == false);
    players.forEach(p => playerList[p.name].afkTime++);
}

function increaseBuggingTime() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && (isPlayerAtCorner(p) == true || isPlayerInCircle(p) == true) && isPlayerBugging_Circle(p) == false && isPlayerBugging_Corner(p) == false);
    players.forEach(p => playerList[p.name].buggingTime++);
}

function isBadword(player, message) {
    return badwords[playerList[player.name].language].filter(b => message.toLowerCase().match(b)).length > 0;
}

function isBadword2(player, message) {
    return badwords[roomObject.locale].filter(b => message.toLowerCase().match(b)).length > 0;
}

function isCommand(player, message) {
    return commands[playerList[player.name].language][message] != null || commands[playerList[player.name].language][message.split(" ")[0]] != null;
}

function isDuplicated(player) {
    var players = room.getPlayerList().filter(p => p.id != player.id);
    var duplicatedName = players.find(p => p.name == player.name);
    var duplicatedAuth = players.find(p => playerList[p.name].auth == player.auth);
    var duplicatedConn = players.find(p => playerList[p.name].conn == player.conn);

    var result = { isDuplicatedName: false, isDuplicatedAccount: false };

    if (duplicatedName && result.isDuplicatedName == false) result.isDuplicatedName = true;
    if ((duplicatedAuth || duplicatedConn) && result.isDuplicatedAccount == false) result.isDuplicatedAccount = true;

    return result;
}

function isImproper(string) {
    return string.startsWith(" ") == true || string.endsWith(" ") == true || string.includes("  ") == true;
}

function isPlayerAFK(player) {
    return room.getPlayerDiscProperties(player.id) != null && (playerList[player.name].afkTime >= roomObject.timeouts.AFK);
}

function isPlayerAtArrestPoint(player) {
    return room.getPlayerDiscProperties(player.id) != null && (room.getPlayerDiscProperties(player.id).x == JMap.redSpawnPoints[JMap.redSpawnPoints.length - 1][0] && room.getPlayerDiscProperties(player.id).y == JMap.redSpawnPoints[JMap.redSpawnPoints.length - 1][1]);
}

function isPlayerAtCorner(player) {
    if (room.getPlayerDiscProperties(player.id) != null) {
        var corners = roomObject.prohibitedPoints[roomObject.teams[player.team]].corner;
        var corner_bugging = corners.filter(c => pointDistance(c, room.getPlayerDiscProperties(player.id)) == roomObject.tolerances.bugging[roomObject.teams[player.team]].corner);
        return corner_bugging.length != 0;
    }
    else return false;
}

function isPlayerBugging_Circle(player) {
    return room.getPlayerDiscProperties(player.id) != null && isPlayerInCircle(player) == true && (playerList[player.name].buggingTime >= roomObject.timeouts.bugging.circle);
}

function isPlayerBugging_Corner(player) {
    return room.getPlayerDiscProperties(player.id) != null && isPlayerAtCorner(player) == true && (playerList[player.name].buggingTime >= roomObject.timeouts.bugging.corner);
}

function isPlayerInactive(player) {
    return room.getPlayerDiscProperties(player.id) != null && (roomObject.timeouts.AFK / 2 <= playerList[player.name].afkTime && playerList[player.name].afkTime <= roomObject.timeouts.AFK / 2 + 1 / 60);
}

function isPlayerInCircle(player) {
    if (room.getPlayerDiscProperties(player.id) != null) {
        var circles = roomObject.prohibitedPoints[roomObject.teams[player.team]].circle;
        var circle_bugging = circles.filter(c => pointDistance({ x: c.x, y: c.y }, room.getPlayerDiscProperties(player.id)) < c.radius - room.getPlayerDiscProperties(player.id).radius);
        return circle_bugging.length != 0;
    }
    else return false;
}

function isPlayerInPitch(player) {
    return room.getPlayerDiscProperties(player.id) != null && player.team == 1 && (roomObject.borders.MinX <= room.getPlayerDiscProperties(player.id).x && room.getPlayerDiscProperties(player.id).x <= roomObject.borders.MaxX && roomObject.borders.MinY <= room.getPlayerDiscProperties(player.id).y && room.getPlayerDiscProperties(player.id).y <= roomObject.borders.MaxY);
}

function isPlayerOnGate(player) {
    return room.getPlayerDiscProperties(player.id) != null && player.team == 2 && (roomObject.prohibitedPoints.blue.gate.MinX <= room.getPlayerDiscProperties(player.id).x && room.getPlayerDiscProperties(player.id).x <= roomObject.prohibitedPoints.blue.gate.MaxX && roomObject.prohibitedPoints.blue.gate.MinY <= room.getPlayerDiscProperties(player.id).y && room.getPlayerDiscProperties(player.id).y <= roomObject.prohibitedPoints.blue.gate.MaxY);
}

function isTooShortOrLong(string) {
    return string.length < roomObject.join.names.length.min || roomObject.join.names.length.max < string.length;
}

function kickAFK() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerAFK(p) == true);

    players.forEach(p => {
        room.kickPlayer(p.id, locales[playerList[p.name].language].Tick.AFK.Kick, kickTypes.Tick.AFK);
    });
}

function kickBugging_Circle() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerBugging_Circle(p) == true);

    players.forEach(p => {
        room.kickPlayer(p.id, `${locales[playerList[p.name].language].Tick.Bugging.Circle.Kick}`, kickTypes.Tick.Bugging);
    });
}

function kickBugging_Corner() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerBugging_Corner(p) == true);

    players.forEach(p => {
        room.kickPlayer(p.id, `${locales[playerList[p.name].language].Tick.Bugging.Corner.Kick}`, kickTypes.Tick.Bugging);
    });
}

function kickIfBadword(player) {
    if (isBadword2(player, player.name) == true) {
        room.kickPlayer(player.id, `${locales[roomObject.locale].Join.Names.Badwords}`, kickTypes.Join.Names.Badwords);
    }
}

function kickIfDuplicated(player) {
    if (isDuplicated(player).isDuplicatedAccount == true) {
        room.kickPlayer(player.id, `${locales[roomObject.locale].Join.Duplicated.Account}`, kickTypes.Join.Duplicated.Account);
    }
    else if (isDuplicated(player).isDuplicatedName == true) {
        room.kickPlayer(player.id, `${locales[roomObject.locale].Join.Duplicated.Name}`, kickTypes.Join.Duplicated.Name);
    }
}

function kickIfImproper(player) {
    if (isImproper(player.name) == true) {
        room.kickPlayer(player.id, `${locales[roomObject.locale].Join.Names.Improper}`, kickTypes.Join.Names.Improper);
    }
}

function pointDistance(p1, p2) {
    return Math.hypot(p1.x - p2.x, p1.y - p2.y);
}

function resetBuggingTime(player) {
    if (playerList[player.name].buggingTime == 0) playerList[player.name].buggingTime = 0;
}

function resetBuggingTimes() {
    var players = room.getPlayerList().filter(p => playerList[p.name].buggingTime != 0);

    players.forEach(p => {
        playerList[p.name].buggingTime = 0;
    });
}

function resetBuggingTimes2() {
    var players = room.getPlayerList().filter(p => isPlayerAtCorner(p) == false && isPlayerInCircle(p) == false && playerList[p.name].buggingTime != 0);

    players.forEach(p => {
        playerList[p.name].buggingTime = 0;
    });
}

function resetGameEndTimer() {
    if (roomObject.timers.gameEndCheck != 0) roomObject.timers.gameEndCheck = 0;
}

function rollBackOnAdminChange(changedPlayer, byPlayer) {
    if (changedPlayer.id == byPlayer.id) {
        updateAdmins2(byPlayer);
    }
    else {
        room.setPlayerAdmin(changedPlayer.id, !changedPlayer.admin);
        room.sendAnnouncement(`${locales[playerList[byPlayer.name].language].AdminChange.Rollback[Number(!changedPlayer.admin)]}`, byPlayer.id, colors.AdminChange.Rollback, fonts.AdminChange.Rollback, sounds.AdminChange.Rollback);
    }
}

function rollBackOnTeamChange(changedPlayer, byPlayer) {
    room.setPlayerTeam(changedPlayer.id, getPreviousTeam(changedPlayer));
    room.sendAnnouncement(`${locales[playerList[byPlayer.name].language].TeamChange.Rollback}`, byPlayer.id, colors.TeamChange.Rollback, fonts.TeamChange.Rollback, sounds.TeamChange.Rollback);
}

function startGameOnJoin() {
    var players = room.getPlayerList().filter(p => playerList[p.name].afkStatus == false);
    var scores = room.getScores();
    equateTeamsOnJoin();
    if (scores == null && players.length > 1) room.startGame();
}

function stopGameOnLeave() {
    var players = room.getPlayerList().filter(p => playerList[p.name].afkStatus == false);
    if (players.length == 0) {
        room.stopGame();
    }
}

function swapTeams() {
    var players = room.getPlayerList();
    var reds = players.filter(p => p.team == 1);
    var blues = players.filter(p => p.team == 2);
    var teams = [reds, blues];
    teams.forEach(t => {
        for (var i = 0; i < t.length; i++) {
            room.setPlayerTeam(t[i].id, 2 - teams.indexOf(t));
        }
    });
}

function updateActivities() {
    var players = room.getPlayerList().filter(p => playerList[p.name].afkStatus == false);
    players.forEach(p => updatePlayerActivity(p));
}

function updateAdmins() {
    var players = room.getPlayerList().filter(p => p.id != 0 && playerList[p.name].afkStatus == false);
    if (players.length == 0) return;
    if (players.find(p => p.admin == true) != null) return;
    room.setPlayerAdmin(players[0].id, true);
}

function updateAdmins2(player) {
    var players = room.getPlayerList().filter(p => p.id != 0 && p.id != player.id && playerList[p.name].afkStatus == false);
    if (players.length == 0) return;
    if (players.find(p => p.admin == true) != null) return;
    room.setPlayerAdmin(players[0].id, true);
}

function updatePlayerActivity(player) {
    playerList[player.name].afkTime = 0;
}

function warnIfAFK() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerInactive(p) == true);

    players.forEach(p => {
        room.sendAnnouncement(`${locales[playerList[p.name].language].Tick.AFK.Warning}`, p.id, colors.Tick.AFK.Warning, fonts.Tick.AFK.Warning, sounds.Tick.AFK.Warning);
    });
}

function warnIfBadword(player, message) {
    if (isBadword(player, message) == true) {
        if (playerList[player.name].badwords < roomObject.tolerances.badwords) {
            playerList[player.name].badwords++;
            room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.Badwords.Warning}`, player.id, colors.Chat.Badwords, fonts.Chat.Badwords, sounds.Chat.Badwords);
            return false;
        }
        else {
            room.kickPlayer(player.id, `${locales[playerList[player.name].language].Chat.Badwords.Kick}`, kickTypes.Chat.Badwords);
            return false;
        }
    }
}

function warnIfBuggingInCircle() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerInCircle(p) == true && (roomObject.timeouts.bugging.circle / 2 <= playerList[p.name].buggingTime && playerList[p.name].buggingTime <= roomObject.timeouts.bugging.circle / 2 + 1 / 60));

    players.forEach(p => {
        room.sendAnnouncement(`${locales[playerList[p.name].language].Tick.Bugging.Circle.Warning}`, p.id, colors.Tick.Bugging.Warning, fonts.Tick.Bugging.Warning, sounds.Tick.Bugging.Warning);
    });
}

function warnIfBuggingAtCorner() {
    var players = room.getPlayerList().filter(p => room.getPlayerDiscProperties(p.id) != null && isPlayerAtCorner(p) == true && (roomObject.timeouts.bugging.corner / 2 <= playerList[p.name].buggingTime && playerList[p.name].buggingTime <= roomObject.timeouts.bugging.corner / 2 + 1 / 60));

    players.forEach(p => {
        room.sendAnnouncement(`${locales[playerList[p.name].language].Tick.Bugging.Corner.Warning}`, p.id, colors.Tick.Bugging.Warning, fonts.Tick.Bugging.Warning, sounds.Tick.Bugging.Warning);
    });
}

room.onGamePause = function (byPlayer) {
    roomObject.gamePauseState = !roomObject.gamePauseState;
    console.log(`${byPlayer == null ? locales[roomObject.locale].Pause.Log[Number(byPlayer == null)] : locales[roomObject.locale].Pause.Log[Number(byPlayer == null)] + " " + byPlayer.name}`);
    if (byPlayer != null) updatePlayerActivity(byPlayer);
    updateActivities();
}

room.onGameStart = function (byPlayer) {
    console.log(`${byPlayer == null ? locales[roomObject.locale].Start.Log[Number(byPlayer != null)] : locales[roomObject.locale].Start.Log[Number(byPlayer != null)] + " " + byPlayer.name}`);
    if (byPlayer != null) updatePlayerActivity(byPlayer);
    changeCollisionStatus();
    resetBuggingTimes();
    updateActivities();
}

room.onGameStop = function (byPlayer) {
    console.log(`${byPlayer == null ? locales[roomObject.locale].Stop.Log[Number(byPlayer != null)] : locales[roomObject.locale].Stop.Log[Number(byPlayer != null)] + " " + byPlayer.name}`);
    var players = room.getPlayerList().filter(p => playerList[p.name].afkStatus == false);
    resetBuggingTimes();
    updateActivities();
    if (byPlayer != null) {
        updatePlayerActivity(byPlayer);
    }
    else {
        resetGameEndTimer();
        if (players.length >= 2) {
            swapTeams();
            equateTeams();
            room.startGame();
        }
    }
}

room.onGameTick = function () {
    if (room.getScores() != null && room.getPlayerList().filter(p => p.team == 1).length != 0 && room.getPlayerList().filter(p => p.team == 2).length != 0) {
        bustingCheck();
        checkForEndGame();
        //fillCircles();
        fillGateArea();
        increaseBuggingTime();
        kickBugging_Circle();
        kickBugging_Corner();
        resetBuggingTimes2();
        warnIfBuggingAtCorner();
        warnIfBuggingInCircle();
    }
    increaseAFKTime();
    kickAFK();
    warnIfAFK();
}

room.onGameUnpause = function (byPlayer) {
    roomObject.gamePauseState = !roomObject.gamePauseState;
    console.log(`${byPlayer == null ? locales[roomObject.locale].Unpause.Log[Number(byPlayer != null)] : locales[roomObject.locale].Unpause.Log[Number(byPlayer != null)] + " " + byPlayer.name}`);
    if (byPlayer != null) updatePlayerActivity(byPlayer);
    updateActivities();
}

room.onPlayerActivity = function (player) {
    updatePlayerActivity(player);
}

room.onPlayerAdminChange = function (changedPlayer, byPlayer) {
    console.log(`${changedPlayer.name} ${byPlayer == null ? locales[roomObject.locale].AdminChange.Log[Number(byPlayer != null)][Number(changedPlayer.admin)] : locales[roomObject.locale].AdminChange.Log[Number(byPlayer != null)][Number(changedPlayer.admin)] + " " + byPlayer.name}`);
    if (byPlayer != null) {
        rollBackOnAdminChange(changedPlayer, byPlayer);
        updatePlayerActivity(byPlayer);
        //updatePlayerActivity(changedPlayer);
    }
}

function getCurrentTime() {
    const date = new Date();
    return `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}.${date.getMilliseconds()}`;
}

let chatWebHook = "https://discord.com/api/webhooks/1258289456507781171/tiOQ8IubWpe9C7LDq5VcnhTR1oEllWF8c5FFrm3tnW66lVYxIrwQhRaZOTQPr2bbOPF2";
  
// Function to send webhook
function sendWebhook(url, content) {
    return fetch(url, {
      method: "POST",
      body: JSON.stringify({ content }),
      headers: { "Content-Type": "application/json" },
    }).then((res) => res);
}

room.onPlayerChat = function (player, message) {
    console.log(`${player.name}: ${message}`);
    sendWebhook(chatWebHook, `\`💬 [coprob] ${player.name} [${player.id}]: ${message}\``);
    updatePlayerActivity(player);

    if (message.startsWith(roomObject.commandPrefix) == true) {
        if (isCommand(player, message) == true) {
            warnIfBadword(player, message);
            commands[playerList[player.name].language][message.split(" ")[0]](player, message);
            return false;
        }
        else {
            warnIfBadword(player, message);
            room.sendAnnouncement(`${locales[playerList[player.name].language].Chat.NotACommand}`, player.id, colors.Chat.NotACommand, fonts.Chat.NotACommand, sounds.Chat.NotACommand);
            return false;
        }
    }
    else {
        warnIfBadword(player, message);
        room.sendAnnouncement(`${roomObject.emojis[player.team]} [${playerList[player.name].points}] [${roomObject.playerStatus[Number(player.admin)]}] ${player.name}: ${message}`, null, colors.Chat.Message[Number(player.admin)], fonts.Chat.Message[Number(player.admin)], sounds.Chat.Message[Number(player.admin)]);
        return false;
    }
}

room.onPlayerJoin = function (player) {
    console.log(`${player.name} ${locales[roomObject.locale].Join.Log.Success}`);

    //kickIfBadword(player);
    //kickIfDuplicated(player);
    //kickIfImproper(player);

    if (playerList[player.name] == undefined) {
        playerList[player.name] = { name: player.name, auth: player.auth, conn: player.conn, id: player.id, afkStatus: false, afkTime: 0, badwords: 0, buggingTime: 0, language: roomObject.locale, points: 0, teams: [], cops: { wins: 0, losses: 0 }, robbers: { wins: 0, losses: 0 } };
    }
    else if (playerList[player.name] != undefined) {
        playerList[player.name].afkStatus = false;
    }

    updateAdmins();
    updatePlayerActivity(player);
    equateTeams();
    startGameOnJoin();
}

room.onPlayerKicked = function (kickedPlayer, reason, ban, byPlayer) {
    console.log(`${kickedPlayer.name} ${byPlayer == null ? locales[roomObject.locale].Kick.Log[Number(byPlayer != null)][Number(ban)] : locales[roomObject.locale].Kick.Log[Number(byPlayer != null)][Number(ban)] + " " + byPlayer.name} ${reason == null ? "" : "(" + reason + ")"}`);
    if (byPlayer != null) updatePlayerActivity(byPlayer);
    updatePlayerActivity(kickedPlayer);
}

room.onPlayerLeave = function (player) {
    console.log(`${player.name} ${locales[roomObject.locale].Leave.Log}`);
    updateAdmins();
    updatePlayerActivity(player);
    equateTeams();
    stopGameOnLeave();
}

room.onPositionsReset = function () {
    console.log(`${locales[roomObject.locale].Reset.Log}`);
    resetBuggingTimes();
    updateActivities();
}

room.onPlayerTeamChange = function (changedPlayer, byPlayer) {
    console.log(`${changedPlayer.name} ${byPlayer == null ? locales[roomObject.locale].TeamChange.Log[changedPlayer.team][Number(byPlayer != null)] : locales[roomObject.locale].TeamChange.Log[changedPlayer.team][Number(byPlayer != null)] + " " + byPlayer.name}`);

    if (changedPlayer.team != 0 && playerList[changedPlayer.name].afkStatus == true) {
        room.setPlayerTeam(changedPlayer.id, 0);
    }
    if (byPlayer != null) {
        rollBackOnTeamChange(changedPlayer, byPlayer);
        updatePlayerActivity(byPlayer);
        //updatePlayerActivity(changedPlayer);
    }
    addPlayerTeam(changedPlayer);
}

room.onRoomLink = function (url) {
    if (roomObject.isRoomSet == false) {
        room.setCustomStadium(Map);
        room.setScoreLimit(roomObject.scoreLimit);
        room.setTeamsLock(roomObject.teamsLock);
        room.setTimeLimit(roomObject.timeLimit);
        console.log(`${locales[roomObject.locale].Link.Log} ${url}`);
        roomObject.isRoomSet = true;
    }
}

room.onStadiumChange = function (newStadiumName, byPlayer) {
    console.log(`${newStadiumName} ${byPlayer == null ? locales[roomObject.locale].StadiumChange.Log[Number(byPlayer != null)] : locales[roomObject.locale].StadiumChange.Log[Number(byPlayer != null)] + " " + byPlayer.name}`);
    if (byPlayer != null) {
        updatePlayerActivity(byPlayer);
        room.sendAnnouncement(`${locales[playerList[byPlayer.name].language].StadiumChange.NoAuthorization}`, byPlayer.id, colors.StadiumChange.NoAuthorization, fonts.StadiumChange.NoAuthorization, sounds.StadiumChange.NoAuthorization);
        room.setCustomStadium(Map);
        room.setScoreLimit(roomObject.scoreLimit);
        room.setTeamsLock(roomObject.teamsLock);
        room.setTimeLimit(roomObject.timeLimit);
    }
}
